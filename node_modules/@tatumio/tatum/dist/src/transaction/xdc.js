"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.sendXdcDeployErc721Transaction = exports.sendXdcErc721Transaction = exports.sendXdcUpdateCashbackForAuthorErc721Transaction = exports.sendXdcBurnErc721Transaction = exports.sendXdcMintMultipleErc721Transaction = exports.sendXdcMintMultipleCashbackErc721Transaction = exports.sendXdcMintErcCashback721Transaction = exports.sendXdcMintErc721Transaction = exports.sendXdcSmartContractMethodInvocationTransaction = exports.sendXdcDeployErc20Transaction = exports.sendXdcCustomErc20Transaction = exports.sendXdcOrErc20Transaction = exports.sendXdcStoreDataTransaction = exports.sendXdcSmartContractReadMethodInvocationTransaction = exports.prepareXdcDeployErc721SignedTransaction = exports.prepareXdcUpdateCashbackForAuthorErc721SignedTransaction = exports.prepareXdcTransferErc721SignedTransaction = exports.prepareXdcBurnErc721SignedTransaction = exports.prepareXdcMintMultipleErc721SignedTransaction = exports.prepareXdcMintMultipleCashbackErc721SignedTransaction = exports.prepareXdcMintErcCashback721SignedTransaction = exports.prepareXdcMintErc721SignedTransaction = exports.prepareXdcSmartContractWriteMethodInvocation = exports.prepareXdcDeployErc20SignedTransaction = exports.prepareXdcCustomErc20SignedTransaction = exports.prepareXdcOrErc20SignedTransaction = exports.prepareXdcBurnErc20SignedTransaction = exports.prepareXdcMintErc20SignedTransaction = exports.prepareXdcStoreDataTransaction = exports.signXdcKMSTransaction = exports.getXdcClient = exports.xdcGetGasPriceInWei = exports.fromXdcAddress = void 0;
const bignumber_js_1 = require("bignumber.js");
const web3_1 = __importDefault(require("web3"));
const web3_utils_1 = require("web3-utils");
const blockchain_1 = require("../blockchain");
const tatum_1 = require("../connector/tatum");
const constants_1 = require("../constants");
const token_abi_1 = __importDefault(require("../contracts/erc20/token_abi"));
const token_bytecode_1 = __importDefault(require("../contracts/erc20/token_bytecode"));
const erc721_abi_1 = __importDefault(require("../contracts/erc721Cashback/erc721_abi"));
const erc721_bytecode_1 = __importDefault(require("../contracts/erc721Cashback/erc721_bytecode"));
const model_1 = require("../model");
const erc721_abi_2 = __importDefault(require("../contracts/erc721General/erc721_abi"));
const erc721_bytecode_2 = __importDefault(require("../contracts/erc721General/erc721_bytecode"));
const erc721Provenance_abi_1 = __importDefault(require("../contracts/erc721Provenance/erc721Provenance_abi"));
const erc721Provenance_bytecode_1 = __importDefault(require("../contracts/erc721Provenance/erc721Provenance_bytecode"));
/**
 * Convert XDC address format.
 */
const fromXdcAddress = (xdcAddress) => {
    return xdcAddress.trim().replace('xdc', '0x');
};
exports.fromXdcAddress = fromXdcAddress;
/**
 * Estimate Gas price for the transaction.
 */
const xdcGetGasPriceInWei = async () => {
    const gasStationUrl = 'https://rpc.xinfin.network/';
    try {
        const { data } = await tatum_1.axios.post(`${gasStationUrl}gasPrice`, {
            'jsonrpc': '2.0',
            'method': 'eth_gasPrice',
            'params': [],
            'id': 1,
        });
        return data ? web3_1.default.utils.toWei(data, 'wei') : web3_1.default.utils.toWei('5', 'kwei');
    }
    catch (e) {
        return web3_1.default.utils.toWei('5', 'kwei');
    }
    return web3_1.default.utils.toWei('5', 'kwei');
};
exports.xdcGetGasPriceInWei = xdcGetGasPriceInWei;
/**
 * Returns XDC server to connect to.
 *
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @param fromPrivateKey optional private key of sender account
 */
const getXdcClient = (provider, fromPrivateKey) => {
    const client = new web3_1.default(provider || `${process.env.TATUM_API_URL || constants_1.TATUM_API_URL}/v3/xdc/web3/${process.env.TATUM_API_KEY}`);
    if (fromPrivateKey) {
        client.eth.accounts.wallet.clear();
        client.eth.accounts.wallet.add(fromPrivateKey);
        client.eth.defaultAccount = client.eth.accounts.wallet[0].address;
    }
    return client;
};
exports.getXdcClient = getXdcClient;
/**
 * Sign XDC pending transaction from Tatum KMS
 * @param tx pending transaction from KMS
 * @param fromPrivateKey private key to sign transaction with.
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const signXdcKMSTransaction = async (tx, fromPrivateKey, provider) => {
    if (tx.chain !== model_1.Currency.XDC) {
        throw Error('Unsupported chain.');
    }
    const client = exports.getXdcClient(provider, fromPrivateKey);
    const transactionConfig = JSON.parse(tx.serializedTransaction);
    transactionConfig.gas = await client.eth.estimateGas(transactionConfig);
    if (!transactionConfig.nonce) {
        transactionConfig.nonce = await blockchain_1.xdcGetTransactionsCount(client.eth.defaultAccount);
    }
    return (await client.eth.accounts.signTransaction(transactionConfig, fromPrivateKey)).rawTransaction;
};
exports.signXdcKMSTransaction = signXdcKMSTransaction;
/**
 * Sign XDC Store data transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcStoreDataTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.CreateRecord);
    const { fromPrivateKey, to, ethFee, data, nonce, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    const address = to || client.eth.defaultAccount;
    if (!address) {
        throw new Error('Recipient must be provided.');
    }
    const hexData = client.utils.isHex(data) ? client.utils.stringToHex(data) : client.utils.toHex(data);
    const addressNonce = nonce ? nonce : await blockchain_1.xdcGetTransactionsCount(address);
    const customFee = ethFee ? Object.assign(Object.assign({}, ethFee), { gasPrice: client.utils.toWei(ethFee.gasPrice, 'gwei') }) : {
        gasLimit: `${hexData.length * 68 + 21000}`,
        gasPrice: await exports.xdcGetGasPriceInWei(),
    };
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(address),
        value: '0',
        gasPrice: customFee.gasPrice,
        gas: customFee.gasLimit,
        data: hexData,
        nonce: addressNonce,
    };
    if (signatureId) {
        return JSON.stringify(tx);
    }
    return (await client.eth.accounts.signTransaction(tx, fromPrivateKey)).rawTransaction;
};
exports.prepareXdcStoreDataTransaction = prepareXdcStoreDataTransaction;
/**
 * Sign ERC20 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param client Web3 client of the XDC Server to connect to. If not set, default public server will be used.
 * @param transaction content of the transaction to broadcast
 * @param signatureId signature ID
 * @param fromPrivateKey private key
 * @param fee Fee object
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareErc20SignedTransactionAbstraction = async (client, transaction, signatureId, fromPrivateKey, fee) => {
    var _a;
    const gasPrice = fee ? client.utils.toWei(fee.gasPrice, 'gwei') : await exports.xdcGetGasPriceInWei();
    const tx = Object.assign(Object.assign({}, transaction), { gasPrice });
    if (signatureId) {
        return JSON.stringify(tx);
    }
    tx.gas = (_a = fee === null || fee === void 0 ? void 0 : fee.gasLimit) !== null && _a !== void 0 ? _a : await client.eth.estimateGas(tx);
    return (await client.eth.accounts.signTransaction(tx, fromPrivateKey)).rawTransaction;
};
/**
 * Sign ERC20 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcMintErc20SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.MintErc20);
    const { fromPrivateKey, amount, to, contractAddress, nonce, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new client.eth.Contract(token_abi_1.default, exports.fromXdcAddress(contractAddress));
    const digits = new bignumber_js_1.BigNumber(10).pow(await contract.methods.decimals().call());
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.mint(exports.fromXdcAddress(to), `0x${new bignumber_js_1.BigNumber(amount).multipliedBy(digits).toString(16)}`).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey);
};
exports.prepareXdcMintErc20SignedTransaction = prepareXdcMintErc20SignedTransaction;
/**
 * Sign ERC20 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcBurnErc20SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.BurnErc20);
    const { fromPrivateKey, amount, contractAddress, nonce, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new client.eth.Contract(token_abi_1.default, exports.fromXdcAddress(contractAddress));
    const digits = new bignumber_js_1.BigNumber(10).pow(await contract.methods.decimals().call());
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.burn(`0x${new bignumber_js_1.BigNumber(amount).multipliedBy(digits).toString(16)}`).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey);
};
exports.prepareXdcBurnErc20SignedTransaction = prepareXdcBurnErc20SignedTransaction;
/**
 * Sign XDC or supported ERC20 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcOrErc20SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.TransferErc20);
    const { fromPrivateKey, to, amount, fee, data, nonce, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(to),
        value: client.utils.toWei(`${amount}`, 'ether'),
        data: client.utils.isHex(data) ? client.utils.stringToHex(data) : client.utils.toHex(data),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcOrErc20SignedTransaction = prepareXdcOrErc20SignedTransaction;
/**
 * Sign XDC custom ERC20 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcCustomErc20SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.TransferErc20);
    const { fromPrivateKey, to, amount, contractAddress, digits, fee, nonce, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new client.eth.Contract([constants_1.TRANSFER_METHOD_ABI], exports.fromXdcAddress(contractAddress));
    const decimals = new bignumber_js_1.BigNumber(10).pow(digits);
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.transfer(exports.fromXdcAddress(to), `0x${new bignumber_js_1.BigNumber(amount).multipliedBy(decimals).toString(16)}`).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcCustomErc20SignedTransaction = prepareXdcCustomErc20SignedTransaction;
/**
 * Sign XDC deploy ERC20 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcDeployErc20SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.DeployErc20);
    const { name, address, symbol, supply, digits, fromPrivateKey, nonce, fee, signatureId, totalCap, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new client.eth.Contract(token_abi_1.default);
    const _digits = new bignumber_js_1.BigNumber(10).pow(digits);
    const deploy = contract.deploy({
        data: token_bytecode_1.default,
        arguments: [
            name,
            symbol,
            address,
            digits,
            `0x${new bignumber_js_1.BigNumber(totalCap || supply).multipliedBy(_digits).toString(16)}`,
            `0x${new bignumber_js_1.BigNumber(supply).multipliedBy(_digits).toString(16)}`,
        ],
    });
    const tx = {
        from: 0,
        data: deploy.encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcDeployErc20SignedTransaction = prepareXdcDeployErc20SignedTransaction;
/**
 * Sign XDC invoke smart contract transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcSmartContractWriteMethodInvocation = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.SmartContractMethodInvocation);
    const { fromPrivateKey, fee, params, methodName, methodABI, contractAddress, amount, nonce, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    const contract = new client.eth.Contract([methodABI]);
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        value: web3_utils_1.toWei(amount || '0', 'ether'),
        data: contract.methods[methodName](...params).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcSmartContractWriteMethodInvocation = prepareXdcSmartContractWriteMethodInvocation;
/**
 * Sign XDC mint ERC 721 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcMintErc721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.EthMintErc721);
    const { fromPrivateKey, to, tokenId, contractAddress, nonce, fee, url, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new (client).eth.Contract(erc721_abi_1.default, exports.fromXdcAddress(contractAddress));
    if (contractAddress) {
        const tx = {
            from: 0,
            to: exports.fromXdcAddress(contractAddress),
            data: contract.methods.mintWithTokenURI(exports.fromXdcAddress(to), tokenId, url).encodeABI(),
            nonce,
        };
        return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
    }
    throw new Error('Contract address should not be empty!');
};
exports.prepareXdcMintErc721SignedTransaction = prepareXdcMintErc721SignedTransaction;
/**
 * Sign XDC mint ERC 721 transaction with cashback via private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcMintErcCashback721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.EthMintErc721);
    const { fromPrivateKey, to, tokenId, contractAddress, nonce, fee, url, signatureId, authorAddresses, cashbackValues, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new (client).eth.Contract(erc721_abi_1.default, exports.fromXdcAddress(contractAddress));
    const cb = [];
    const cashbacks = cashbackValues;
    for (const c of cashbacks) {
        cb.push(`0x${new bignumber_js_1.BigNumber(client.utils.toWei(c, 'ether')).toString(16)}`);
    }
    if (contractAddress) {
        const tx = {
            from: 0,
            to: exports.fromXdcAddress(contractAddress),
            data: contract.methods.mintWithCashback(exports.fromXdcAddress(to), tokenId, url, authorAddresses, cb).encodeABI(),
            nonce,
        };
        return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
    }
    throw new Error('Contract address should not be empty!');
};
exports.prepareXdcMintErcCashback721SignedTransaction = prepareXdcMintErcCashback721SignedTransaction;
/**
 * Sign XDC mint multiple ERC 721 Cashback transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcMintMultipleCashbackErc721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.EthMintMultipleErc721);
    const { fromPrivateKey, to, tokenId, contractAddress, url, nonce, signatureId, authorAddresses, cashbackValues, fee, } = body;
    const client = await exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new (client).eth.Contract(erc721_abi_1.default, exports.fromXdcAddress(contractAddress));
    const cashbacks = cashbackValues;
    const cb = [];
    for (const c of cashbacks) {
        const cb2 = [];
        for (const c2 of c) {
            cb2.push(`0x${new bignumber_js_1.BigNumber(client.utils.toWei(c2, 'ether')).toString(16)}`);
        }
        cb.push(cb2);
    }
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.mintMultipleCashback(to.map(t => exports.fromXdcAddress(t)), tokenId, url, authorAddresses, cb).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcMintMultipleCashbackErc721SignedTransaction = prepareXdcMintMultipleCashbackErc721SignedTransaction;
/**
 * Sign XDC mint multiple ERC 721 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcMintMultipleErc721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.EthMintMultipleErc721);
    const { fromPrivateKey, to, tokenId, contractAddress, url, nonce, signatureId, fee, } = body;
    const client = await exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new (client).eth.Contract(erc721_abi_1.default, exports.fromXdcAddress(contractAddress));
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.mintMultiple(to.map(t => exports.fromXdcAddress(t)), tokenId, url).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcMintMultipleErc721SignedTransaction = prepareXdcMintMultipleErc721SignedTransaction;
/**
 * Sign XDC burn ERC 721 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcBurnErc721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.EthBurnErc721);
    const { fromPrivateKey, tokenId, fee, contractAddress, nonce, signatureId, } = body;
    const client = exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new (client).eth.Contract(erc721_abi_1.default, exports.fromXdcAddress(contractAddress));
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.burn(tokenId).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcBurnErc721SignedTransaction = prepareXdcBurnErc721SignedTransaction;
/**
 * Sign XDC transfer ERC 721 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcTransferErc721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.EthTransferErc721);
    const { fromPrivateKey, to, tokenId, fee, contractAddress, nonce, signatureId, value, } = body;
    const client = await exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new (client).eth.Contract(erc721_abi_1.default, exports.fromXdcAddress(contractAddress));
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.safeTransfer(exports.fromXdcAddress(to), tokenId).encodeABI(),
        nonce,
        value: value ? `0x${new bignumber_js_1.BigNumber(value).multipliedBy(1e18).toString(16)}` : undefined,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcTransferErc721SignedTransaction = prepareXdcTransferErc721SignedTransaction;
/**
 * Sign XDC update cashback ERC 721 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcUpdateCashbackForAuthorErc721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.UpdateCashbackErc721);
    const { fromPrivateKey, cashbackValue, tokenId, fee, contractAddress, nonce, signatureId, } = body;
    const client = await exports.getXdcClient(provider, fromPrivateKey);
    // @ts-ignore
    const contract = new (client).eth.Contract(erc721_abi_1.default, exports.fromXdcAddress(contractAddress));
    const tx = {
        from: 0,
        to: exports.fromXdcAddress(contractAddress),
        data: contract.methods.updateCashbackForAuthor(tokenId, `0x${new bignumber_js_1.BigNumber(web3_utils_1.toWei(cashbackValue, 'ether')).toString(16)}`).encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcUpdateCashbackForAuthorErc721SignedTransaction = prepareXdcUpdateCashbackForAuthorErc721SignedTransaction;
/**
 * Sign XDC deploy ERC 721 transaction with private keys locally. Nothing is broadcast to the blockchain.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction data to be broadcast to blockchain.
 */
const prepareXdcDeployErc721SignedTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.EthDeployErc721);
    const { fromPrivateKey, fee, name, symbol, provenance, cashback, nonce, signatureId, publicMint, } = body;
    const client = await exports.getXdcClient(provider, fromPrivateKey);
    if (provenance && cashback) {
        throw new Error('Only one of provenance or cashback must be present and true.');
    }
    let abi = erc721_abi_2.default;
    let data = erc721_bytecode_2.default;
    if (provenance) {
        abi = erc721Provenance_abi_1.default;
        data = erc721Provenance_bytecode_1.default;
    }
    else if (cashback) {
        abi = erc721_abi_1.default;
        data = erc721_bytecode_1.default;
    }
    // @ts-ignore
    const contract = new client.eth.Contract(abi, null, {
        data,
    });
    // @ts-ignore
    const deploy = contract.deploy({
        arguments: [name, symbol, publicMint ? publicMint : false],
    });
    const tx = {
        from: 0,
        data: deploy.encodeABI(),
        nonce,
    };
    return await prepareErc20SignedTransactionAbstraction(client, tx, signatureId, fromPrivateKey, fee);
};
exports.prepareXdcDeployErc721SignedTransaction = prepareXdcDeployErc721SignedTransaction;
/**
 * Send XDC invoke smart contract transaction to the blockchain.
 * Invoked method only reads from blockchain the data and returns them back.
 *
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 */
const sendXdcSmartContractReadMethodInvocationTransaction = async (body, provider) => {
    await tatum_1.validateBody(body, model_1.SmartContractReadMethodInvocation);
    const { params, methodName, methodABI, contractAddress, } = body;
    const client = exports.getXdcClient(provider);
    const contract = new client.eth.Contract([methodABI], exports.fromXdcAddress(contractAddress));
    return { data: await contract.methods[methodName](...params).call() };
};
exports.sendXdcSmartContractReadMethodInvocationTransaction = sendXdcSmartContractReadMethodInvocationTransaction;
/**
 * Send XDC store data transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcStoreDataTransaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcStoreDataTransaction(body, provider), body.signatureId);
exports.sendXdcStoreDataTransaction = sendXdcStoreDataTransaction;
/**
 * Send XDC or supported ERC20 transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcOrErc20Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcOrErc20SignedTransaction(body, provider), body.signatureId);
exports.sendXdcOrErc20Transaction = sendXdcOrErc20Transaction;
/**
 * Send XDC custom ERC20 transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcCustomErc20Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcCustomErc20SignedTransaction(body, provider), body.signatureId);
exports.sendXdcCustomErc20Transaction = sendXdcCustomErc20Transaction;
/**
 * Send XDC deploy ERC20 transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcDeployErc20Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcDeployErc20SignedTransaction(body, provider), body.signatureId);
exports.sendXdcDeployErc20Transaction = sendXdcDeployErc20Transaction;
/**
 * Send XDC invoke smart contract transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcSmartContractMethodInvocationTransaction = async (body, provider) => {
    if (body.methodABI.stateMutability === 'view') {
        return exports.sendXdcSmartContractReadMethodInvocationTransaction(body, provider);
    }
    return blockchain_1.xdcBroadcast(await exports.prepareXdcSmartContractWriteMethodInvocation(body, provider), body.signatureId);
};
exports.sendXdcSmartContractMethodInvocationTransaction = sendXdcSmartContractMethodInvocationTransaction;
/**
 * Send XDC ERC721 mint transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcMintErc721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcMintErc721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcMintErc721Transaction = sendXdcMintErc721Transaction;
/**
 * Send XDC ERC721 mint transaction to the blockchain with cashback details. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcMintErcCashback721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcMintErcCashback721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcMintErcCashback721Transaction = sendXdcMintErcCashback721Transaction;
/**
 * Send XDC ERC721 mint multiple transaction with cashback to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcMintMultipleCashbackErc721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcMintMultipleCashbackErc721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcMintMultipleCashbackErc721Transaction = sendXdcMintMultipleCashbackErc721Transaction;
/**
 * Send XDC ERC721 mint multiple transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcMintMultipleErc721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcMintMultipleErc721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcMintMultipleErc721Transaction = sendXdcMintMultipleErc721Transaction;
/**
 * Send XDC ERC721 burn transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcBurnErc721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcBurnErc721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcBurnErc721Transaction = sendXdcBurnErc721Transaction;
const sendXdcUpdateCashbackForAuthorErc721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcUpdateCashbackForAuthorErc721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcUpdateCashbackForAuthorErc721Transaction = sendXdcUpdateCashbackForAuthorErc721Transaction;
/**
 * Send XDC ERC721 transaction to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcErc721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcTransferErc721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcErc721Transaction = sendXdcErc721Transaction;
/**
 * Send XDC ERC721 deploy to the blockchain. This method broadcasts signed transaction to the blockchain.
 * This operation is irreversible.
 * @param body content of the transaction to broadcast
 * @param provider url of the XDC Server to connect to. If not set, default public server will be used.
 * @returns transaction id of the transaction in the blockchain
 */
const sendXdcDeployErc721Transaction = async (body, provider) => blockchain_1.xdcBroadcast(await exports.prepareXdcDeployErc721SignedTransaction(body, provider), body.signatureId);
exports.sendXdcDeployErc721Transaction = sendXdcDeployErc721Transaction;
// TODO: add ERC-1155 support
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieGRjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3RyYW5zYWN0aW9uL3hkYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSwrQ0FBeUM7QUFDekMsZ0RBQXdCO0FBRXhCLDJDQUFtQztBQUNuQyw4Q0FBc0U7QUFDdEUsOENBQXlEO0FBQ3pELDRDQUFrRTtBQUNsRSw2RUFBeUQ7QUFDekQsdUZBQW1FO0FBQ25FLHdGQUE0RTtBQUM1RSxrR0FBc0Y7QUFDdEYsb0NBaUJrQjtBQUNsQix1RkFBeUU7QUFDekUsaUdBQW1GO0FBQ25GLDhHQUFxRjtBQUNyRix3SEFBK0Y7QUFFL0Y7O0dBRUc7QUFDSSxNQUFNLGNBQWMsR0FBRyxDQUFDLFVBQWtCLEVBQVUsRUFBRTtJQUMzRCxPQUFPLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQy9DLENBQUMsQ0FBQTtBQUZZLFFBQUEsY0FBYyxrQkFFMUI7QUFFRDs7R0FFRztBQUNJLE1BQU0sbUJBQW1CLEdBQUcsS0FBSyxJQUFJLEVBQUU7SUFDNUMsTUFBTSxhQUFhLEdBQUcsNkJBQTZCLENBQUE7SUFDbkQsSUFBSTtRQUNGLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFNLGFBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxhQUFhLFVBQVUsRUFBRTtZQUM1RCxTQUFTLEVBQUUsS0FBSztZQUNoQixRQUFRLEVBQUUsY0FBYztZQUN4QixRQUFRLEVBQUUsRUFBRTtZQUNaLElBQUksRUFBRSxDQUFDO1NBQ1IsQ0FBQyxDQUFBO1FBQ0YsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLGNBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0tBQzVFO0lB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